tunnel_ip_subnet: 172.16.234.0
tunnel_ip_range: 172.16.234
tunnel_cidr: 24

# VXLAN specific configuration
vxlan_ip_subnet: 192.168.234.0
vxlan_ip_range: 192.168.234
vxlan_cidr: 24

# ECMP configuration
ecmp_check_interval: 2
ecmp_script_path: /usr/local/bin/ecmp-watcher.sh

# BGP ECMP: Enable equal-cost multipath routing for BGP routes
# When enabled, all tunnel groups advertise routes with identical BGP attributes
# This allows Linux kernel to install multiple routes as ECMP
enable_ecmp: true

wireguard_port: 51820
wireguard_private_key_path: /etc/wireguard/private_key
wireguard_public_key_path: /etc/wireguard/public_key

# Default configuration for physical interfaces (can be overridden in inventory)
default_physical_interfaces:
  - name: eth0
    wg_count: 8
  - name: eth1
    wg_count: 8

# Base IP ranges for different interface groups
# Each physical interface gets its own range of IPs
interface_base_ranges:
  eth0:
    machine_range: 10.0.0.0/24
    engine_range: 10.10.0.0/24
  eth1:
    machine_range: 10.1.0.0/24
    engine_range: 10.11.0.0/24
  ens3:
    machine_range: 10.2.0.0/24
    engine_range: 10.12.0.0/24
  eth2:
    machine_range: 10.3.0.0/24
    engine_range: 10.13.0.0/24
  eth3:
    machine_range: 10.4.0.0/24
    engine_range: 10.14.0.0/24

# Dynamic route configuration - conditional based on host type
# Machine side configuration (for hosts starting with "machine")
machine_dynamic_route_target: "10.10.0.0/24"
machine_dynamic_route_interface: "eth0"
machine_dynamic_route_curl_timeout: 2
machine_dynamic_route_probes:
  - label: "target-1"
    url: "http://10.0.0.61:9115/probe?target=192.168.234.2&module=icmp"
    next_hop: "10.0.0.61"
  - label: "target-2"
    url: "http://10.0.0.49:9115/probe?target=192.168.234.4&module=icmp"
    next_hop: "10.0.0.49"

# Engine side configuration (for hosts starting with "engine")
engine_dynamic_route_target: "10.0.0.0/24"
engine_dynamic_route_interface: "ens3"
engine_dynamic_route_curl_timeout: 2
engine_dynamic_route_probes:
  - label: "target-1"
    url: "http://10.10.0.25:9115/probe?target=192.168.234.2&module=icmp"
    next_hop: "10.10.0.25"
  - label: "target-2"
    url: "http://10.10.0.112:9115/probe?target=192.168.234.4&module=icmp"
    next_hop: "10.10.0.112"
